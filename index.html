<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <!-- ëª¨ë°”ì¼ ê¸°ê¸°ì—ì„œ í™”ë©´ ë„ˆë¹„ì— ë§ì¶° ìŠ¤ì¼€ì¼ë§ -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSTS FL 2025ë…„ 1íšŒ</title>
  <style>
    body {
      font-family: 'Malgun Gothic', sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f4;
    }

    .header {
      background: #2c3e50;
      color: white;
      padding: 1rem;
      text-align: center;
    }

    /* nav-tabs ì „ì²´ì— í…Œë‘ë¦¬ + ë¼ìš´ë”© */
    .nav-tabs {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 10px;
      background: #fff;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
      padding: 0.5rem 1rem;

      /* ì¶”ê°€ëœ ë¶€ë¶„: í…Œë‘ë¦¬ì™€ ë‘¥ê·¼ ëª¨ì„œë¦¬ */
      border: 1px solid #eaeaea;
      border-radius: 10px;
    }

    .nav-tabs a {
      display: inline-block;
      color: #333;
      text-decoration: none;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-weight: bold;
      transition: background 0.2s ease, color 0.2s ease, transform 0.2s ease;

      /* ë©”ë‰´ í•­ëª©ì—ë„ ì˜…ì€ í…Œë‘ë¦¬ */
      border: 1px solid #ddd;
      background: #fff;
      /* hover ì´ì „ ê¸°ë³¸ ë°°ê²½ */
    }

    .nav-tabs a:hover {
      background: #f1f1f1;
      transform: translateY(-1px);
    }

    .nav-tabs a.active {
      background: #6839a0;
      color: #fff;

      /* í™œì„±í™” ìƒíƒœì¼ ë•Œ í…Œë‘ë¦¬ ìƒ‰ìƒë„ ê°•ì¡° */
      border-color: #6839a0;

      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
    }

    .print-view .header,
    .print-view .nav-tabs {
      display: none;
    }

    .content {
      padding: 2rem;
    }

    @media (max-width: 600px) {
      .nav-tabs {
        flex-wrap: wrap;
        padding: 0.5rem;
      }

      .nav-tabs a {
        margin: 2px;
        font-size: 14px;
      }

      .content {
        padding: 1rem;
      }
    }

    /* question-sub í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
    .question-sub-table {
      width: 100%;
      /* í…Œì´ë¸” ë„ˆë¹„ë¥¼ 100%ë¡œ ì„¤ì • */
      border: 1px solid #2a0073;
      /* í…Œë‘ë¦¬ ìƒ‰ìƒ */
      margin: 5px 0;
      /* í…Œì´ë¸” ìœ„ì•„ë˜ ì—¬ë°± */
      border-collapse: collapse;
      /* í…Œë‘ë¦¬ ê²¹ì¹¨ ì œê±° */
    }

    /* <ë³´ê¸°> ì œëª© ìŠ¤íƒ€ì¼ */
    .question-sub-title {
      text-align: center;
      /* ê°€ìš´ë° ì •ë ¬ */
      font-weight: bold;
      /* êµµì€ ê¸€ì”¨ */
      padding: 3px 0;
      /* ìœ„ì•„ë˜ íŒ¨ë”© ì¤„ì´ê¸° */
    }

    /* <ë³´ê¸°> ë‚´ìš© ìŠ¤íƒ€ì¼ */
    .question-sub-content {
      text-align: left;
      /* ì™¼ìª½ ì •ë ¬ */
      padding: 3px 10px;
      /* ë‚´ë¶€ ì—¬ë°± */
      line-height: 1.6;
      /* ì¤„ ê°„ê²© ì„¤ì • */
    }

    /* ì£¼ê´€ì‹ input í•„ë“œ ìŠ¤íƒ€ì¼ */
    input.text-input {
      border: 2px solid rgb(203, 203, 255);
      /* ìƒ‰ í…Œë‘ë¦¬ */
      padding: 10px 12px;
      /* ë‚´ë¶€ ì—¬ë°± (ìœ„ì•„ë˜ 10px, ì¢Œìš° 12px) */
      font-size: 15px;
      /* í°íŠ¸ í¬ê¸° */
      width: 100%;
      /* ë„ˆë¹„ë¥¼ 100%ë¡œ ì„¤ì • */
      box-sizing: border-box;
      /* í…Œë‘ë¦¬ì™€ íŒ¨ë”©ì„ í¬í•¨í•œ í¬ê¸° ê³„ì‚° */
      border-radius: 4px;
      /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
      height: 40px;
      /* ë†’ì´ë¥¼ ëª…í™•í•˜ê²Œ ì§€ì • */
      color: rgba(0, 0, 34, 0.322);
      /* ê¸€ììƒ‰ ì„¤ì • */
    }

    /* í¬ì»¤ìŠ¤ ìƒíƒœì˜ ìŠ¤íƒ€ì¼ */
    input.text-input:focus {
      outline: none;
      /* ê¸°ë³¸ í¬ì»¤ìŠ¤ ì•„ì›ƒë¼ì¸ ì œê±° */
      border-color: darkblue;
      /* í¬ì»¤ìŠ¤ ì‹œ ë” ì§„í•œ íŒŒë€ìƒ‰ í…Œë‘ë¦¬ */
      background-color: #f0f8ff;
      /* í¬ì»¤ìŠ¤ ì‹œ ì—°í•œ íŒŒë€ìƒ‰ ë°°ê²½ */
      color: rgba(0, 0, 34, 0.322);
      /* ê¸€ììƒ‰ ì„¤ì • */
    }
  </style>
</head>

<body>
  <div class="header">
    <h1></h1>
  </div>
  <div class="nav-tabs">
    <a href="#" data-set="cstsal_2402" class="active">AL 24-2íšŒ</a>
    <a href="#" data-set="cstsal_2401">AL 24-1íšŒ</a>
    <a href="#" data-set="cstsfl_2501">FL 25-1íšŒ</a>
    <a href="#" data-set="cstsfl_2405">FL 24-5íšŒ</a>
    <a href="#" data-set="cstsfl_2404">FL 24-4íšŒ</a>
    <a href="#" data-set="cstsfl_2403">FL 24-3íšŒ</a>
    <a href="#" data-set="cstsfl_2402">FL 24-2íšŒ</a>
    <a href="#" data-set="cstsfl_2401">FL 24-1íšŒ</a>
  </div>

  <div class="content">

    <style>
      /* í€´ì¦ˆ ì „ìš© ìŠ¤íƒ€ì¼ */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      .quiz-container {
        max-width: 800px;
        margin: 0 auto;
        background: #fff;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .settings {
        display: flex;
        align-items: center;
        justify-content: space-between;
        /* ì¢Œìš°ë¡œ ë°°ì¹˜ */
        background: #f9f9f9;
        border-radius: 8px;
        padding: 10px 15px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .settings label {
        font-weight: 500;
        margin-right: 6px;
      }

      .settings select {
        border: 1px solid #ccc;
        border-radius: 4px;
        padding: 5px 8px;
        font-size: 14px;
        outline: none;
        transition: box-shadow 0.2s;
      }

      .settings select:focus {
        box-shadow: 0 0 0 2px rgba(0, 120, 212, 0.2);
      }

      .page-nav-buttons {
        margin-left: auto;
        /* ì˜¤ë¥¸ìª½ìœ¼ë¡œ ë°€ê¸° */
        display: flex;
        gap: 10px;
      }

      .page-nav-buttons button {
        background: linear-gradient(to right, #ecddff, #e9d1ff);
        color: #333;
        /* í°ìƒ‰ ëŒ€ì‹  ì•½ê°„ ì–´ë‘ìš´ í°íŠ¸ë¡œ ê°€ë…ì„± â†‘ */
        border: none;
        padding: 6px 12px;
        border-radius: 25px;
        /* ê¸°ì¡´ ë‘¥ê·¼ ëª¨ì–‘ ìœ ì§€ */
        cursor: pointer;
        font-size: 14px;
        transition: transform 0.2s ease, background 0.3s ease;
      }

      .page-nav-buttons button:hover {
        transform: scale(1.05);
        background: linear-gradient(to right, #ecddff, #e9d1ff);
        /* ë°˜ëŒ€ë¡œ ê·¸ë¼ë””ì–¸íŠ¸ */
      }

      .question {
        margin-bottom: 25px;
        padding: 20px;
        border-bottom: 1px solid #eee;
      }

      .question-text {
        font-weight: 500;
        margin-bottom: 15px;
        line-height: 1.6;
        /* ì¤„ ê°„ê²© ì„¤ì • */
      }

      .options {
        margin-left: 20px;
      }

      .option {
        display: flex;
        /* í”Œë ‰ìŠ¤ ë°•ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ë ¬ */
        align-items: center;
        /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
        gap: 10px;
        /* ë²„íŠ¼ê³¼ í…ìŠ¤íŠ¸ ì‚¬ì´ ê°„ê²© */
        margin: 10px 0;
        /* ì˜µì…˜ ê°„ì˜ ê°„ê²© */
        padding: 10px;
        /* ë‚´ë¶€ ì—¬ë°± */
        border-radius: 5px;
        /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
        transition: background 0.3s ease;
        /* ë°°ê²½ìƒ‰ ì „í™˜ íš¨ê³¼ */
      }

      .option:hover {
        background-color: #ecddff;
      }

      /* ê¸°ë³¸ ë¼ë””ì˜¤ ë²„íŠ¼ ìˆ¨ê¸°ê¸° : 250402 */
      input[type="radio"] {
        appearance: none;
        /* ê¸°ë³¸ ë¸Œë¼ìš°ì € ìŠ¤íƒ€ì¼ ì œê±° */
        -webkit-appearance: none;
        -moz-appearance: none;
        width: 20px;
        height: 20px;
        border: 2px solid #ccc;
        /* ê¸°ë³¸ í…Œë‘ë¦¬ */
        border-radius: 50%;
        /* ì›í˜• ë²„íŠ¼ */
        outline: none;
        cursor: pointer;
        vertical-align: middle;
        display: inline-block;
        margin: 0;
        position: relative;
        transition: all 0.3s ease;
        /* ë¶€ë“œëŸ¬ìš´ ì „í™˜ íš¨ê³¼ */
        flex-shrink: 0;
        /* í¬ê¸° ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ ê³ ì • */
        box-sizing: border-box;
      }

      /* ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ í…Œë‘ë¦¬ */
      input[type="radio"]:hover {
        border-color: rgb(197, 170, 255);
        /*  í…Œë‘ë¦¬ */
      }

      /* ì„ íƒëœ ìƒíƒœì—ì„œ ì´ë¯¸ì§€ ì‚¬ìš© */
      input[type="radio"]:checked {
        background-image: url('img/radio_checked_p.png');
        /* ì²´í¬ëœ ìƒíƒœì˜ ì´ë¯¸ì§€ */
        background-size: cover;
        /* ì´ë¯¸ì§€ë¥¼ ì¶•ì†Œí•˜ì—¬ ë§ì¶¤ */
        background-repeat: no-repeat;
        background-position: center;
        /* ì´ë¯¸ì§€ ìœ„ì¹˜ ì¡°ì • */
        border: none
      }

      /* ë¼ë²¨ê³¼ ê°„ê²© ì¡°ì •  : 250402 */
      .option label {
        display: inline-flex;
        /* ë¼ë””ì˜¤ ë²„íŠ¼ê³¼ í…ìŠ¤íŠ¸ë¥¼ ê°€ë¡œë¡œ ì •ë ¬ */
        align-items: center;
        /* ë¼ë””ì˜¤ ë²„íŠ¼ì„ í…ìŠ¤íŠ¸ ë§¨ ìœ„ì— ë§ì¶¤ */
        margin-left: 10px;
        font-size: 15px;
        line-height: 1.4;
      }

      .result {
        margin-top: 15px;
        padding: 10px;
        border-radius: 4px;
        display: block;
      }

      .message {
        margin-top: 10px;
        padding: 10px;
        border-radius: 4px;
        background-color: #f8f9fa;
      }

      .question-buttons {
        margin-top: 15px;
        display: flex;
        gap: 15px;
        justify-content: flex-end;
      }

      .check-button,
      .reset-button {
        padding: 8px 20px;
        border-radius: 25px;
        border: none;
        color: #fff;
        font-size: 14px;
        cursor: pointer;
        transition: transform 0.2s ease, background 0.3s ease;
      }

      .check-button {
        background: linear-gradient(to right, #ecddff, #e9d1ff);
      }

      .reset-button {
        background: linear-gradient(to right, #f5a3a3, #e88f8f);
      }

      .check-button:hover,
      .reset-button:hover {
        transform: scale(1.05);
        filter: brightness(1.1);
      }

      .navigation {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid #ddd;
        flex-wrap: nowrap;
      }

      .navigation button {
        background: linear-gradient(to right, #ecddff, #e9d1ff);
        color: #333;
        border: none;
        padding: 10px 25px;
        border-radius: 30px;
        font-size: 16px;
        cursor: pointer;
        transition: transform 0.2s ease, background 0.3s ease;
        white-space: nowrap;
      }

      .navigation button:hover {
        transform: scale(1.05);
        background: linear-gradient(to right, #ecddff, #e9d1ff);
      }

      .progress-bar {
        margin: 20px 0;
        height: 25px;
        background: #f0f0f0;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        position: relative;
      }

      .progress {
        height: 100%;
        background: #ecddff;
        transition: width 0.4s ease-in-out;
        width: 0;
        border-radius: 15px 0 0 15px;
      }

      .progress-text {
        position: absolute;
        width: 100%;
        top: 0;
        left: 0;
        text-align: center;
        line-height: 25px;
        color: #3a005e;
        font-size: 16px;
        font-weight: bold;
        /* text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8); */
        z-index: 1;
      }

      .correct {
        background-color: #e6ffe6;
        color: #006400;
        border: 1px solid #006400;
      }

      .option.correct-answer {
        background-color: #e6ffe6;
        border-left: 3px solid #006400;
      }

      .correct-answer {
        background-color: #dff0d8 !important;
        border: 1px solid #3c763d !important;
        padding: 5px;
        border-radius: 4px;
      }

      .wrong-answer {
        background-color: #f2dede !important;
        border: 1px solid #a94442 !important;
        padding: 5px;
        border-radius: 4px;
      }

      .incorrect {
        background-color: #ffe6e6;
        color: #640000;
        border: 1px solid #640000;
      }

      .explanation {
        margin-top: 15px;
        padding: 15px 20px;
        background-color: #e7f5ff;
        border: 2px solid #c4e5ff;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        font-size: 16px;
        color: #333;
        display: none;
        opacity: 0;
        transition: opacity 0.5s ease, transform 0.5s ease;
        transform: translateY(-10px);
      }

      .explanation.visible {
        display: block !important;
        opacity: 1;
        transform: translateY(0);
      }

      #scrollTopBtn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #0078d4;
        color: #fff;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
        display: none;
        /* ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€ */
        z-index: 1000;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        transition: opacity 0.3s ease;
      }

      /* ì´ë¯¸ì§€ë¥¼ í™”ë©´ ë„ˆë¹„ì— ë§ê²Œ ì¶•ì†Œ, í´ë¦­ ì‹œ í¬ì¸í„° í‘œì‹œ */
      .quiz-container img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
      }

      @media (max-width: 600px) {
        .quiz-container {
          max-width: 100%;
          margin: 0;
          padding: 20px;
        }

        .settings {
          flex-direction: row;
          /* column -> row ë¡œ ë³€ê²½ */
          flex-wrap: nowrap;
          /* ì¤„ë°”ê¿ˆ ë°©ì§€ */
          justify-content: space-between;
          align-items: center;
        }

        .page-nav-buttons {
          margin-top: 0;
          /* í•„ìš”í•˜ë©´ ì œê±° */
        }

        .navigation {
          flex-wrap: wrap;
          justify-content: center;
          /* ë²„íŠ¼ ê°€ë¡œ ì¤‘ì•™ì •ë ¬ */
        }

        .navigation button {
          margin: 5px 5px;
          /* ë²„íŠ¼ ê°„ê²© */
          font-size: 14px;
          /* ì¡°ê¸ˆ ë” ì‘ì€ í°íŠ¸ */
        }

        .question {
          margin-bottom: 15px;
          padding: 10px;
        }

        .question-text {
          font-size: 16px;
        }

        .options {
          margin-left: 0;
        }

        .option {
          margin: 8px 0;
          padding: 8px;
        }

        .check-button,
        .reset-button {
          font-size: 13px;
          padding: 6px 12px;
        }

        .progress-text {
          font-size: 14px;
        }
      }

      @media (max-width: 400px) {
        .question-text {
          font-size: 15px;
        }

        .check-button,
        .reset-button {
          font-size: 12px;
          padding: 5px 10px;
        }

        .navigation button {
          font-size: 13px;
          padding: 8px 15px;
        }
      }
    </style>

    <div class="quiz-container">
      <h1></h1>
      <div class="settings">
        <label for="questionsPerPageSelect">í˜ì´ì§€ë‹¹ ë¬¸í•­ ìˆ˜:</label>
        <select id="questionsPerPageSelect">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="10" selected>10</option>
        </select>
        <span class="page-nav-buttons">
          <button onclick="prevPage()" id="prevPageBtn">â—€</button>
          <button onclick="nextPage()" id="nextPageBtn">â–¶</button>
          <input type="number" id="questionNumberInput" placeholder="ë¬¸ì œë²ˆí˜¸ ì…ë ¥" min="1"
            style="width:80px; margin-left: 10px;">
          <button onclick="jumpToQuestion()">ì´ë™</button>
        </span>
      </div>
      <div class="progress-bar">
        <div class="progress" id="progress"></div>
        <div id="progress-text" class="progress-text"></div>
      </div>
      <div id="questions"></div>
      <div class="navigation">
        <button onclick="prevPage()" id="prevButton">â—€</button>
        <button onclick="checkAnswers()" id="checkButton">ì •ë‹µ í™•ì¸</button>
        <button onclick="resetQuiz()" id="resetButton">ë¦¬ì…‹</button>
        <button onclick="nextPage()" id="nextButton">â–¶</button>
        <button onclick="scrollToTop()" id="scrollTopBtn">â–² Top</button>
      </div>
      <div id="score"></div>
    </div>

    <script>
      let currentDataName = "cstsal_2402"; // ê¸°ë³¸ ë°ì´í„° ì´ë¦„ : 250409 heina
      let QUESTIONS_PER_PAGE = 10;
      let currentPage = 0;
      let currentQuestions = [];
      let totalScore = 0;

      const userAnswers = {}; // ì‚¬ìš©ìê°€ ì£¼ê´€ì‹ ì…ë ¥í•œ ê°’ì„ ì €ì¥í•  ê°ì²´ : 250328 heina

      // let currentDataName = "cstsal_2402"; // ê¸°ë³¸ ë°ì´í„° ì´ë¦„ : 250409 heina
      let quizData = {}; // ë¡œë“œëœ ë°ì´í„°ë“¤ì„ ì €ì¥ : 250409 heina

      // -------------------- [ nab tab data í•œ í˜ì´ì§€ì—ì„œ ì²˜ë¦¬ : 250409 heina ] ---------------------------
      document.addEventListener('DOMContentLoaded', () => {
        loadQuizData(currentDataName, function (data) {
          currentQuestions = data.slice(0, QUESTIONS_PER_PAGE);
          initializeQuiz();
        });
      });

      function loadQuizData(dataName, callback) { // data js file load
        if (quizData[dataName]) {
          console.log("âœ… Already loaded:", dataName);
          callback(quizData[dataName]);
          return;
        }

        const script = document.createElement("script");
        script.src = `static/js/${dataName}_quizData.inc.js`; // âœ… ë°±í‹±ìœ¼ë¡œ ë³€ìˆ˜ ì‚¬ìš©
        console.log("ğŸ“¦ Loading script:", script.src);

        script.onload = () => {
          const data = window[`${dataName}_quizData`];
          if (!data) {
            console.error("âŒ Data variable not found:", `${dataName}_quizData`);
            return;
          }
          quizData[dataName] = data;
          console.log("âœ… Data loaded for", dataName);
          callback(data);
        };

        script.onerror = () => {
          console.error("âŒ Failed to load script:", script.src);
        };

        document.body.appendChild(script);
      }

      document.querySelectorAll('.nav-tabs a').forEach(tab => { // íƒ­ í´ë¦­ ì´ë²¤íŠ¸ ì—°ê²°
        tab.addEventListener('click', function (e) {
          e.preventDefault();

          // íƒ­ ìƒíƒœ í‘œì‹œ
          document.querySelectorAll('.nav-tabs a').forEach(t => t.classList.remove('active'));
          this.classList.add('active');

          const selectedSet = this.dataset.set;
          currentDataName = selectedSet;

          loadQuizData(selectedSet, function (data) {
            // ë°ì´í„°ë¥¼ í˜„ì¬ ë°ì´í„°ë¡œ ì„¤ì •
            currentPage = 0;
            currentQuestions = data.slice(0, QUESTIONS_PER_PAGE);
            updateCurrentQuestions = () => {
              const startIdx = currentPage * QUESTIONS_PER_PAGE;
              const endIdx = Math.min(startIdx + QUESTIONS_PER_PAGE, data.length);
              currentQuestions = data.slice(startIdx, endIdx);
            };
            
            updateNavigation = () => {
              const totalPages = Math.ceil(data.length / QUESTIONS_PER_PAGE);
              document.getElementById("prevButton").disabled = (currentPage === 0);
              document.getElementById("nextButton").disabled = (currentPage >= totalPages - 1);
            };

            updateProgress = () => {
              const progressElement = document.getElementById('progress');
              const totalPages = Math.ceil(data.length / QUESTIONS_PER_PAGE);
              progressElement.style.width = ((currentPage + 1) / totalPages) * 100 + "%";
              const startQuestion = currentPage * QUESTIONS_PER_PAGE + 1;
              const endQuestion = Math.min((currentPage + 1) * QUESTIONS_PER_PAGE, data.length);
              document.getElementById('progress-text').textContent = `ë¬¸í•­ ${startQuestion}-${endQuestion} / ${data.length}`;
            };

            updateCurrentQuestions();
            displayQuestions();
            updateNavigation();
            updateProgress();
          });
        });
      });

      // window.addEventListener('DOMContentLoaded', () => { // ì²˜ìŒì— ê¸°ë³¸ ë°ì´í„° ë¡œë“œ
      //   loadQuizData("currentDataName", function (data) {
      //     currentQuestions = data.slice(0, QUESTIONS_PER_PAGE);
      //     initializeQuiz();
      //   });
      // });
      // -------------------- [ nab tab data í•œ í˜ì´ì§€ì—ì„œ ì²˜ë¦¬ : 250409 heina ] ---------------------------

      // ì´ë¯¸ì§€ í´ë¦­ ì‹œ ìƒˆ íƒ­ìœ¼ë¡œ ì—´ê¸°
      function showFullSizeImage(src) {
        window.open(src, '_blank');
      }

      function jumpToQuestion() {
        const input = document.getElementById('questionNumberInput');
        const questionNum = parseInt(input.value);
        if (isNaN(questionNum) || questionNum < 1 || questionNum > quizData[currentDataName].length) {
          alert('ì˜¬ë°”ë¥¸ ë¬¸ì œ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”. (1 ~ ' + quizData[currentDataName].length + ')');
          return;
        }

        // ë¬¸ì œ ë²ˆí˜¸ì— ë”°ë¥¸ í˜ì´ì§€ ê³„ì‚° (0ë¶€í„° ì‹œì‘í•˜ëŠ” í˜ì´ì§€ ì¸ë±ìŠ¤)
        currentPage = Math.floor((questionNum - 1) / QUESTIONS_PER_PAGE);
        updateCurrentQuestions();
        displayQuestions();
        updateNavigation();
        updateProgress();
        resetQuiz();

        // í˜ì´ì§€ ë‚´ì—ì„œ í•´ë‹¹ ë¬¸ì œ ì¸ë±ìŠ¤ (0ë¶€í„° ì‹œì‘)
        const questionIndex = (questionNum - 1) % QUESTIONS_PER_PAGE;
        // í•´ë‹¹ ë¬¸ì œ ìš”ì†Œë¥¼ ì°¾ì•„ ìŠ¤í¬ë¡¤ ì´ë™
        const questionElements = document.querySelectorAll('.question');
        if (questionElements && questionElements[questionIndex]) {
          questionElements[questionIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });
          // ì›í•œë‹¤ë©´ í•´ë‹¹ ë¬¸ì œì— í•˜ì´ë¼ì´íŠ¸ íš¨ê³¼ë¥¼ ì¤„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
          questionElements[questionIndex].classList.add('highlight');
          setTimeout(() => {
            questionElements[questionIndex].classList.remove('highlight');
          }, 2000);
        }
      }


      // ë¬¸ì œ ë‚´ ì´ë¯¸ì§€ë¥¼ <img> íƒœê·¸ë¡œ ì¹˜í™˜í•˜ë©°, onclick ì´ë²¤íŠ¸ë¥¼ ì£¼ì–´ ì›ë³¸ ë³´ê¸° ê°€ëŠ¥í•˜ê²Œ í•¨
      function replaceImageTags(text) {
        return text.replace(
          /\[([^\]]+\.(?:jpg|png|jpeg|gif))\]/gi,
          '<img src="img/$1" alt="$1" onclick=\'showFullSizeImage("img/$1")\' />'
        );
      }

      // í•´ì„¤ í…ìŠ¤íŠ¸(ì„¤ëª…)ì— í¬í•¨ëœ ì´ë¯¸ì§€ë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬
      function processExplanation(text) {
        const items = text.split('||').map(item => item.trim());
        const imageRegex = /^[^\s]+\.(?:jpg|jpeg|png|gif)$/i;

        const htmlItems = items.map(item => {
          if (item.includes('<br>')) {
            // "ì´ë¯¸ì§€íŒŒì¼ <br> ì„¤ëª…" í˜•íƒœë¡œ ë‚˜ëˆ ì„œ ì²˜ë¦¬
            const parts = item.split('<br>').map(part => part.trim());
            const imagePart = parts[0];
            const captionPart = parts.slice(1).join('<br>');

            if (imageRegex.test(imagePart)) {
              return `
                    <div style="display: inline-block; text-align: center; margin: 10px;">
                        <img src="img/${imagePart}" alt="${imagePart}" 
                             style="cursor:pointer; max-width:100%; height:auto;"
                             onclick='showFullSizeImage("img/${imagePart}")' />
                    </div>
                    <div style="margin-top: 5px;">${captionPart}</div>
                `;
            } else {
              return replaceImageTags(item);
            }


          } else {
            // "<br>"ê°€ ì—†ëŠ” ë‹¨ì¼ í•­ëª©
            if (imageRegex.test(item)) {
              return `<img src="img/${item}" alt="${item}" style="cursor:pointer;"
                  onclick='showFullSizeImage("img/${item}")' />`;
            } else {
              return replaceImageTags(item);
            }
          }
        });

        return htmlItems.join('<br>');
      }

      document.getElementById('questionsPerPageSelect').addEventListener('change', function () {
        QUESTIONS_PER_PAGE = parseInt(this.value);
        currentPage = 0;
        updateCurrentQuestions();
        displayQuestions();
        updateNavigation();
        updateProgress();
        resetQuiz();
      });

      function initializeQuiz() {
        updateCurrentQuestions();
        displayQuestions();
        updateNavigation();
        updateProgress();
      }

      function loadQuestionSet() {
        const startIdx = currentPage * QUESTIONS_PER_PAGE;
        const endIdx = Math.min(startIdx + QUESTIONS_PER_PAGE, quizData[currentDataName].length);
        currentQuestions = quizData[currentDataName].slice(startIdx, endIdx);
        displayQuestions();
        updateCurrentQuestions();
      }

      function updateNavigation() {
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        if (prevButton) {
          prevButton.disabled = (currentPage === 0);
        }
        if (nextButton) {
          nextButton.disabled = (currentPage === Math.ceil(quizData[currentDataName].length / QUESTIONS_PER_PAGE) - 1);
        }
      }

      function updateProgress() {
        const progressElement = document.getElementById('progress');
        const totalPages = Math.ceil(quizData[currentDataName].length / QUESTIONS_PER_PAGE);
        let progressPercent = ((currentPage + 1) / totalPages) * 100;
        progressElement.style.width = progressPercent + '%';

        const totalQuestions = quizData[currentDataName].length;
        const startQuestion = currentPage * QUESTIONS_PER_PAGE + 1;
        const endQuestion = Math.min((currentPage + 1) * QUESTIONS_PER_PAGE, totalQuestions);

        if (startQuestion === endQuestion) {
          document.getElementById('progress-text').textContent = `ë¬¸í•­ ${startQuestion} / ${totalQuestions}`;
        } else {
          document.getElementById('progress-text').textContent = `ë¬¸í•­ ${startQuestion}-${endQuestion} / ${totalQuestions}`;
        }
      }

      function showAnswers() {
        currentQuestions.forEach((q, index) => {
          const optionsContainer = document.querySelector(`#q${index}o0`).closest('.question').querySelector('.options');
          q.options.forEach((option, i) => {
            if (option.right) {
              const optionElement = optionsContainer.children[i];
              optionElement.classList.add('correct-answer');
            }
          });
          document.getElementById(`explanation${index}`).classList.add('visible');
        });
      }

      function generateOptions(question, questionIndex) {
        return question.options.map((option, optionIndex) => `
      <div class="option">
        <input type="${question.type}"
               name="q${questionIndex}"
               value="${optionIndex}"
               id="q${questionIndex}o${optionIndex}">
        <label for="q${questionIndex}o${optionIndex}">${option.value}</label>
      </div>
    `).join('');
      }

      function displayQuestions() {
        const questionsContainer = document.getElementById('questions');
        questionsContainer.innerHTML = '';
        const startNumber = currentPage * QUESTIONS_PER_PAGE + 1;

        currentQuestions.forEach((q, index) => {
          const questionDiv = document.createElement('div');
          questionDiv.className = 'question';

          const questionNumber = startNumber + index;
          // ë¬¸ì œ í…ìŠ¤íŠ¸ ë‚´ ì´ë¯¸ì§€ íƒœê·¸ ì¹˜í™˜
          const processedQuestion = replaceImageTags(q.question);
          // í•´ì„¤ í…ìŠ¤íŠ¸ ë‚´ ì´ë¯¸ì§€ íƒœê·¸ ì¹˜í™˜
          const processedExplanation = processExplanation(q.explanation);

          let optionsHTML = ''; //generateOptions(q, index);
          let inputFieldHTML = ''; //20250328 heina
          let questionSubHTML = ''; // <ë³´ê¸°> ë‚´ìš© HTML : 250402
          let questionSub02HTML = ''; // <ë³´ê¸°> ë‚´ìš© HTML : 250402

          // í˜ì´ì§€ë‹¹ 1ë¬¸í•­ì¼ ë•Œ ê°œë³„ ë²„íŠ¼ ê°ì¶”ê¸°(ì„ íƒ ì‚¬í•­)
          let questionButtonsHTML = '';
          if (QUESTIONS_PER_PAGE !== 1) {
            questionButtonsHTML = `
          <div class="question-buttons">
            <button onclick="checkSingleAnswer(${index})" class="check-button">ì •ë‹µ í™•ì¸</button>
            <button onclick="resetSingleQuestion(${index})" class="reset-button">ë¦¬ì…‹</button>
          </div>
        `;
          }

          // ì£¼ê´€ì‹ ë¬¸ì œ ì²˜ë¦¬ : 20250328 heina
          if (q.type === 'text') {
            inputFieldHTML = `
            <input type="text" id="question${index}" class="text-input" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
        `;
            optionsHTML = ''; // ì£¼ê´€ì‹ ë¬¸ì œì¼ ê²½ìš° optionsHTML ì´ˆê¸°í™”
          }
          else {
            optionsHTML = generateOptions(q, index);
          }
          // <ë³´ê¸°> ì²˜ë¦¬: question_subê°€ ìˆëŠ” ê²½ìš° í‘œë¡œ í‘œì‹œ : 250402
          if (q.question_sub) {
            questionSubHTML = `
              <table class="question-sub-table">
                <tr>
                  <td class="question-sub-title">${q.question_sub.startsWith('<ë³´ê¸°>') ? '<ë³´ê¸°>' : '<ë‹¤ìŒ>'}</td> <!-- ì œëª© ì²˜ë¦¬ -->
                </tr>
                <tr>
                  <td class="question-sub-content">
                    ${q.question_sub.replace('<ë³´ê¸°>', '').replace('<ë‹¤ìŒ>', '').trim()} <!-- ë‚´ìš© ì²˜ë¦¬ -->
                  </td>
                </tr>
             </table>
            `;
          }
          // <ë³´ê¸°/ë‹¤ìŒ> 2ê°œì¸ ê²½ìš° ì²˜ë¦¬: question_sub_02ê°€ ìˆëŠ” ê²½ìš° í‘œë¡œ í‘œì‹œ : 250402
          if (q.question_sub_02) {
            questionSub02HTML = `
              <table class="question-sub-table">
                <tr>
                  <td class="question-sub-title">${q.question_sub_02.startsWith('<ë³´ê¸°>') ? '<ë³´ê¸°>' : '<ë‹¤ìŒ>'}</td> <!-- ì œëª© ì²˜ë¦¬ -->
                </tr>
                <tr>
                  <td class="question-sub-content">
                    ${q.question_sub_02.replace('<ë³´ê¸°>', '').replace('<ë‹¤ìŒ>', '').trim()} <!-- ë‚´ìš© ì²˜ë¦¬ -->
                  </td>
                </tr>
             </table>
            `;
          }
          // ë¬¸ì œ HTML ìƒì„±
          questionDiv.innerHTML = `
        <div class="question-text">[${questionNumber}] ${processedQuestion}</div>
        ${questionSubHTML} <!-- <ë³´ê¸°/ë‹¤ìŒìŒ> ë‚´ìš© ì¶”ê°€ -->
        ${questionSub02HTML} <!-- <ë³´ê¸°/ë‹¤ìŒìŒ> ë‚´ìš© ì¶”ê°€ -->
        <div class="options">${optionsHTML}</div>
        ${inputFieldHTML} <!-- ì£¼ê´€ì‹ ë‹µ ì…ë ¥ í•„ë“œ ì¶”ê°€ -->
        ${questionButtonsHTML}
        <div class="result" id="result${index}"></div>
        <div class="message" id="message${index}" style="display: none;"></div>
        <div class="explanation" id="explanation${index}">
          ${processedExplanation}
        </div>
        `;

          questionsContainer.appendChild(questionDiv);
        });
      }

      function checkSingleAnswer(index) {
        const q = currentQuestions[index];
        const resultDiv = document.getElementById(`result${index}`);
        const messageDiv = document.getElementById(`message${index}`);
        const explanationDiv = document.getElementById(`explanation${index}`);
        let isCorrect = false;
        let message = '';

        if (q.type === 'radio') {
          const selectedOption = document.querySelector(`input[name="q${index}"]:checked`);
          if (!selectedOption) {
            message = 'ë‹µì„ ì„ íƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
            messageDiv.innerHTML = `ì •ë‹µì€ "${q.options[q.correct].value}" ì…ë‹ˆë‹¤.`;
            const correctOptionElement = document.getElementById(`q${index}o${q.correct}`);
            if (correctOptionElement) {
              correctOptionElement.closest('.option').classList.add('correct-answer');
            }
          } else {
            isCorrect = Number(selectedOption.value) === q.correct;
            handleResult(isCorrect, selectedOption, q, index);
          }
        } else if (q.type === 'checkbox') {
          const selectedOptions = Array.from(document.querySelectorAll(`input[id^="q${index}o"]:checked`))
            .map(input => Number(input.id.slice(-1)));

          if (selectedOptions.length === 0) {
            message = 'ë‹µì„ ì„ íƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
            messageDiv.innerHTML = `ì •ë‹µì€ ${q.correct.map(i => `"${q.options[i].value}"`).join(', ')} ì…ë‹ˆë‹¤.`;
            q.correct.forEach(correctIndex => {
              const correctElement = document.getElementById(`q${index}o${correctIndex}`);
              if (correctElement) {
                correctElement.closest('.option').classList.add('correct-answer');
              }
            });
          } else {
            isCorrect = arraysEqual(selectedOptions.sort(), q.correct.sort());
            handleCheckboxResult(isCorrect, selectedOptions, q, index);
          }
        }
        // ì£¼ê´€ì‹ ë‹µ ì²´í¬ : 20250328 heina
        else if (q.type === 'text') {
          const userAnswer = document.getElementById(`question${index}`).value.trim();

          if (userAnswer === '') {
            message = 'ë‹µì„ ì…ë ¥í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
            messageDiv.innerHTML = Array.isArray(q.correct)
              ? `ì •ë‹µì€ '${q.correct.join(' | ')}' ì…ë‹ˆë‹¤.`
              : `ì •ë‹µì€ '${q.correct}' ì…ë‹ˆë‹¤.`;
          } else {
            isCorrect = q.correct.includes(userAnswer);
            handleTextResult(isCorrect, userAnswer, q, index);
          }
        }
        showResult(resultDiv, messageDiv, explanationDiv, isCorrect, message);
      }

      function showResult(resultDiv, messageDiv, explanationDiv, isCorrect, message) {
        resultDiv.textContent = message || (isCorrect ? 'ì •ë‹µì…ë‹ˆë‹¤!' : 'í‹€ë ¸ìŠµë‹ˆë‹¤.');
        resultDiv.style.color = isCorrect ? 'blue' : 'red';
        resultDiv.style.display = 'block';
        messageDiv.style.display = 'block';
        messageDiv.style.color = 'red';
        explanationDiv.classList.add('visible');
      }

      function handleResult(isCorrect, selectedOption, q, index) {
        const messageDiv = document.getElementById(`message${index}`);

        if (isCorrect) {
          messageDiv.innerHTML = '';
          selectedOption.closest('.option').classList.add('correct-answer');
        } else {
          messageDiv.innerHTML = `ì •ë‹µì€ "${q.options[q.correct].value}" ì…ë‹ˆë‹¤.`;
          selectedOption.closest('.option').classList.add('wrong-answer');
        }
        const correctOptionElement = document.getElementById(`q${index}o${q.correct}`);
        if (correctOptionElement) {
          correctOptionElement.closest('.option').classList.add('correct-answer');
        }
      }

      function checkAnswers() {
        let score = 0; // í˜„ì¬ í˜ì´ì§€ì˜ ì ìˆ˜
        document.querySelectorAll('.option').forEach(option => {
          option.classList.remove('correct-answer', 'wrong-answer');
        });

        currentQuestions.forEach((q, index) => {
          const resultDiv = document.getElementById(`result${index}`);
          const messageDiv = document.getElementById(`message${index}`);
          const explanationDiv = document.getElementById(`explanation${index}`);
          if (!resultDiv || !messageDiv || !explanationDiv) return;

          let isCorrect = false;
          let message = '';

          if (q.type === 'radio') {
            const selectedOption = document.querySelector(`input[name="q${index}"]:checked`);
            const correctOptionElement = document.getElementById(`q${index}o${q.correct}`);

            if (!selectedOption) {
              message = 'ë‹µì„ ì„ íƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
              messageDiv.innerHTML = `ì •ë‹µì€ "${q.options[q.correct].value}" ì…ë‹ˆë‹¤.`;
            } else {
              isCorrect = Number(selectedOption.value) === q.correct;
              if (isCorrect) {
                message = 'ì •ë‹µì…ë‹ˆë‹¤!';
                messageDiv.innerHTML = '';
                selectedOption.closest('.option').classList.add('correct-answer');
              } else {
                message = 'í‹€ë ¸ìŠµë‹ˆë‹¤.';
                messageDiv.innerHTML = `ì •ë‹µì€ "${q.options[q.correct].value}" ì…ë‹ˆë‹¤.`;
                selectedOption.closest('.option').classList.add('wrong-answer');
              }
            }
            if (correctOptionElement) {
              correctOptionElement.closest('.option').classList.add('correct-answer');
            }
            if (isCorrect) score++;
          } else if (q.type === 'checkbox') {
            const selectedOptions = Array.from(document.querySelectorAll(`input[id^="q${index}o"]:checked`))
              .map(input => Number(input.id.slice(-1)));

            if (selectedOptions.length === 0) {
              message = 'ë‹µì„ ì„ íƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
              messageDiv.innerHTML = `ì •ë‹µì€ ${q.correct.map(i => `"${q.options[i].value}"`).join(', ')} ì…ë‹ˆë‹¤.`;

            } else {
              isCorrect = arraysEqual(selectedOptions.sort(), q.correct.sort());
              if (isCorrect) {
                message = 'ì •ë‹µì…ë‹ˆë‹¤!';
                messageDiv.innerHTML = '';
              } else {
                message = 'í‹€ë ¸ìŠµë‹ˆë‹¤.';
                messageDiv.innerHTML = `ì •ë‹µì€ ${q.correct.map(i => `"${q.options[i].value}"`).join(', ')} ì…ë‹ˆë‹¤.`;

                selectedOptions.forEach(sel => {
                  if (!q.correct.includes(sel)) {
                    const element = document.querySelector(`#q${index}o${sel}`);
                    if (element) {
                      element.closest('.option').classList.add('wrong-answer');
                    }
                  }
                });
              }
            }
            q.correct.forEach(correctIndex => {
              const correctElement = document.getElementById(`q${index}o${correctIndex}`);
              if (correctElement) {
                correctElement.closest('.option').classList.add('correct-answer');
              }
            });
            if (isCorrect) score++;
          }
          // ì£¼ê´€ì‹ ë‹µ ì²´í¬ : 20250328 heina
          else if (q.type === 'text') {
            const userAnswer = document.getElementById(`question${index}`).value.trim();

            if (userAnswer === '') {
              message = 'ë‹µì„ ì…ë ¥í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
              messageDiv.innerHTML = Array.isArray(q.correct)
                ? `ì •ë‹µì€ '${q.correct.join(' | ')}' ì…ë‹ˆë‹¤.`
                : `ì •ë‹µì€ '${q.correct}' ì…ë‹ˆë‹¤.`;
            } else {
              isCorrect = Array.isArray(q.correct)
                ? q.correct.includes(userAnswer)
                : userAnswer === q.correct;

              if (isCorrect) {
                message = 'ì •ë‹µì…ë‹ˆë‹¤!';
                messageDiv.innerHTML = '';
              } else {
                message = 'í‹€ë ¸ìŠµë‹ˆë‹¤.';
                if (Array.isArray(q.correct)) {
                  messageDiv.innerHTML = `ì •ë‹µì€ '${q.correct.join(' | ')}' ì…ë‹ˆë‹¤.`;
                } else {
                  messageDiv.innerHTML = `ì •ë‹µì€ '${q.correct}' ì…ë‹ˆë‹¤.`;
                }
              }
            }
            if (isCorrect) score++;
          }
          resultDiv.textContent = message;
          resultDiv.style.color = isCorrect ? 'blue' : 'red';
          resultDiv.style.display = 'block';
          messageDiv.style.display = 'block';
          messageDiv.style.color = 'red';
          explanationDiv.classList.add('visible');
        });

        //250331    totalScore = score;
        totalScore += score; // í˜„ì¬ í˜ì´ì§€ ì ìˆ˜ë¥¼ totalScoreì— ëˆ„ì 
        const scoreElement = document.getElementById('score');
        if (scoreElement) {
          //250331      scoreElement.textContent = `ì ìˆ˜: ${score}/${currentQuestions.length}`;
          scoreElement.textContent =
            `í˜„ì¬ í˜ì´ì§€ ì ìˆ˜: ${score}/${currentQuestions.length}, ì´ ì ìˆ˜: ${totalScore}/${quizData[currentDataName].length}`;
        }
      }

      function arraysEqual(arr1, arr2) {
        if (arr1.length !== arr2.length) return false;
        return arr1.every((val, idx) => val === arr2[idx]);
      }

      function updateCurrentQuestions() {
        const start = currentPage * QUESTIONS_PER_PAGE;
        const end = Math.min(start + QUESTIONS_PER_PAGE, quizData[currentDataName].length);
        currentQuestions = quizData[currentDataName].slice(start, end);
      }

      function resetQuiz() {
        currentQuestions.forEach((q, index) => {
          const inputs = document.querySelectorAll(`input[id^="q${index}"]`);
          const resultDiv = document.getElementById(`result${index}`);
          const messageDiv = document.getElementById(`message${index}`);
          const explanationDiv = document.getElementById(`explanation${index}`);

          inputs.forEach(input => {
            input.checked = false;
            input.closest('.option').classList.remove('correct-answer', 'wrong-answer');
          });

          if (resultDiv) resultDiv.textContent = '';
          if (messageDiv) {
            messageDiv.textContent = '';
            messageDiv.style.display = 'none';
          }
          if (explanationDiv) explanationDiv.classList.remove('visible');
        });

        //250331    totalScore = 0;
        const scoreElement = document.getElementById('score');
        if (scoreElement) {
          //250331      scoreElement.textContent = 'ì ìˆ˜: 0/0';
          scoreElement.textContent = `ì ìˆ˜: 0/${currentQuestions.length}, ì´ ì ìˆ˜: ${totalScore}/${quizData[currentDataName].length}`;
        }
      }

      function prevPage() {
        if (currentPage > 0) {
          currentPage--;
          updateCurrentQuestions();
          displayQuestions();
          updateNavigation();
          updateProgress();
          resetQuiz();
          scrollToTop();
        }
      }

      function nextPage() {
        const maxPage = Math.ceil(quizData[currentDataName].length / QUESTIONS_PER_PAGE) - 1;
        if (currentPage < maxPage) {
          currentPage++;
          updateCurrentQuestions();
          displayQuestions();
          updateNavigation();
          updateProgress();
          resetQuiz();
          scrollToTop()
        }
      }

      function handleCheckboxResult(isCorrect, selectedOptions, q, index) {
        const messageDiv = document.getElementById(`message${index}`);

        if (isCorrect) {
          messageDiv.innerHTML = '';
        } else {
          messageDiv.innerHTML = `ì •ë‹µì€ ${q.correct.map(i => `"${q.options[i].value}"`).join(', ')} ì…ë‹ˆë‹¤.`;
          selectedOptions.forEach(sel => {
            if (!q.correct.includes(sel)) {
              const element = document.querySelector(`#q${index}o${sel}`);
              if (element) {
                element.closest('.option').classList.add('wrong-answer');
              }
            }
          });
        }
        q.correct.forEach(correctIndex => {
          const correctElement = document.getElementById(`q${index}o${correctIndex}`);
          if (correctElement) {
            correctElement.closest('.option').classList.add('correct-answer');
          }
        });
      }

      function handleTextResult(isCorrect, q, index) { // ì£¼ê´€ì‹ : 20250328 heina
        const messageDiv = document.getElementById(`message${index}`);

        if (q.type === 'text') { // ì£¼ê´€ì‹ ì²˜ë¦¬
          if (isCorrect) {
            messageDiv.innerHTML = '';
          } else {
            if (Array.isArray(q.correct)) {
              messageDiv.innerHTML = `ì •ë‹µì€ '${q.correct.join(' | ')}' ì…ë‹ˆë‹¤.`;
            } else {
              messageDiv.innerHTML = `ì •ë‹µì€ '${q.correct}' ì…ë‹ˆë‹¤.`;
            }
          }
          return; // ì£¼ê´€ì‹ ë¬¸ì œì´ë¯€ë¡œ ì¶”ê°€ ì²˜ë¦¬ëŠ” í•„ìš”í•˜ì§€ ì•ŠìŒ
        }
      }

      // ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ê°ì§€í•˜ì—¬ ë²„íŠ¼ í‘œì‹œ ì—¬ë¶€ ê²°ì •
      window.addEventListener("scroll", function () {
        const btn = document.getElementById("scrollTopBtn");
        if (window.pageYOffset > 300) {
          btn.style.display = "block";
        } else {
          btn.style.display = "none";
        }
      });

      // ë²„íŠ¼ í´ë¦­ ì‹œ í˜ì´ì§€ ìµœìƒë‹¨ìœ¼ë¡œ ë¶€ë“œëŸ½ê²Œ ìŠ¤í¬ë¡¤
      function scrollToTop() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
      function resetSingleQuestion(index) {
        const inputs = document.querySelectorAll(`input[id^="q${index}"]`);
        const resultDiv = document.getElementById(`result${index}`);
        const messageDiv = document.getElementById(`message${index}`);
        const explanationDiv = document.getElementById(`explanation${index}`);

        inputs.forEach(input => {
          input.checked = false;
          input.closest('.option').classList.remove('correct-answer', 'wrong-answer');
        });

        if (resultDiv) resultDiv.textContent = '';
        if (messageDiv) {
          messageDiv.textContent = '';
          messageDiv.style.display = 'none';
        }
        if (explanationDiv) explanationDiv.classList.remove('visible');
      }

      // document.addEventListener('DOMContentLoaded', initializeQuiz);
    </script>

  </div>
</body>

</html>
